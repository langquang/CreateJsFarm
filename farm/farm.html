<!DOCTYPE html>
<html>
<head>
    <title>EaselJS Example: Bitmap Text</title>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <link href="assets/farmStyles.css" rel="stylesheet" type="text/css"/>

    <!-- Note: All core EaselJS classes are listed here: -->
    <script type="text/javascript" src="../src/createjs/events/Event.js"></script>
    <script type="text/javascript" src="../src/createjs/events/EventDispatcher.js"></script>
    <script type="text/javascript" src="../src/createjs/utils/Proxy.js"></script>
    <script type="text/javascript" src="../src/preloadjs/AbstractLoader.js"></script>
    <script type="text/javascript" src="../src/preloadjs/LoadQueue.js"></script>
    <script type="text/javascript" src="../src/preloadjs/TagLoader.js"></script>
    <script type="text/javascript" src="../src/preloadjs/XHRLoader.js"></script>
    <script type="text/javascript" src="../src/createjs/utils/IndexOf.js"></script>
    <script type="text/javascript" src="../src/easeljs/utils/UID.js"></script>
    <script type="text/javascript" src="../src/easeljs/utils/Ticker.js"></script>
    <script type="text/javascript" src="../src/easeljs/geom/Matrix2D.js"></script>
    <script type="text/javascript" src="../src/easeljs/geom/Point.js"></script>
    <script type="text/javascript" src="../src/easeljs/geom/Rectangle.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Shadow.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/SpriteSheet.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Graphics.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/DisplayObject.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Container.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Stage.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Bitmap.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Sprite.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/BitmapAnimation.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/BitmapText.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Shape.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/Text.js"></script>
    <script type="text/javascript" src="../src/easeljs/display/DOMElement.js"></script>
    <script type="text/javascript" src="../src/easeljs/events/MouseEvent.js"></script>
    <script type="text/javascript" src="../src/easeljs/filters/Filter.js"></script>
    <script type="text/javascript" src="../src/easeljs/ui/ButtonHelper.js"></script>
    <script type="text/javascript" src="../src/easeljs/ui/Touch.js"></script>
    <script type="text/javascript" src="../src/easeljs/utils/SpriteSheetUtils.js"></script>
    <script type="text/javascript" src="../src/easeljs/utils/SpriteSheetBuilder.js"></script>

    <script type="text/javascript" src="../src/easeljs/filters/BlurFilter.js"></script>
    <script type="text/javascript" src="../src/easeljs/filters/ColorFilter.js"></script>
    <script type="text/javascript" src="../src/easeljs/filters/ColorMatrix.js"></script>
    <script type="text/javascript" src="../src/easeljs/filters/ColorMatrixFilter.js"></script>

    <script type="text/javascript" src="sylvester.src.js"></script>
    <script type="text/javascript" src="IsoEntity.js"></script>
    <script type="text/javascript" src="IsoState.js"></script>


    <!-- We also provide hosted minified versions of all CreateJS libraries.
      http://code.createjs.com -->

    <script>

        var canvas;
        var stage;
        var fpsLabel;
        var loader;
        var stageLocLabel;
        var background;
        // container
        var gameContainer;
        var isoContainer;
        // instance
        var isoState;
        var canpan = true;
        // constance
        var stageWidth, stageHeight;


        function init() {
            //=================================== Stage =============================================
            //find canvas
            canvas = document.getElementById("farmCanvas");
            stageWidth = canpan.width;
            stageHeight = canpan.height;
            // create a new stage and point it at our canvas:
            stage = new createjs.Stage(canvas);
            // to get onMouseOver & onMouseOut events, we need to enable them on the stage:
            stage.enableMouseOver();
            // mousemove
            stage.mouseMoveOutside = true;

            //====================================== background ======================================
            background = new createjs.Bitmap("assets/background.jpg");

            //===================================== container ========================================
            // layer 0
            gameContainer = new createjs.Container();
            stage.addChild(gameContainer);
            // layer 1
            gameContainer.addChild(background);
            // layer 2
            isoContainer = new createjs.Container();
            gameContainer.addChild(isoContainer);

            // ==================================== Instance =========================================
            isoState = new IsoState(gameContainer, background, isoContainer);

            // ===================================  stats ============================================
            stageLocLabel = new createjs.Text("Test press, click, doubleclick, mouseover, and mouseout", "14px Arial", "#FFF");
            stageLocLabel.x = 10;
            stageLocLabel.y = 5;
            stage.addChild(stageLocLabel);

            // add a text object to output the current FPS:
            fpsLabel = new createjs.Text("-- fps", "bold 14px Arial", "#FFF");
            stage.addChild(fpsLabel);
            fpsLabel.x = 10;
            fpsLabel.y = 20;

            // start the tick and point it at the window so we can do some work before updating the stage:
            createjs.Ticker.setFPS(60);
            createjs.Ticker.addEventListener("tick", tick);
            stage.on("stagemousemove", function (evt) {
                stageLocLabel.text = "stageX/Y: " + evt.stageX + "," + evt.stageY; // always in bounds
            });

            // =================================== Global Event ===========================================
            // attach mouse handlers directly to the source canvas.
            // better than calling from canvas tag for cross browser compatibility:
            stage.addEventListener("stagemousemove", moveCanvas);
            stage.addEventListener("stagemousedown", clickCanvas);

        }

        function tick(event) {
            fpsLabel.text = Math.round(createjs.Ticker.getMeasuredFPS()) + " fps";
            stage.update(event);
        }

        function clickCanvas(evt) {

        }

        function moveCanvas(evt) {

        }

    </script>
</head>
<body onload="init()">
<div id="loader"></div>
<header id="header" class="EaselJS">
</header>

<canvas id="farmCanvas" width="936" height="640"></canvas>
</body>
</html>